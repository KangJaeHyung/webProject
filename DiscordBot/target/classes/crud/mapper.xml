<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="crud.mapper">
	<insert id="insertUser" parameterType="model.User_table">
	insert into user_table values(
		#{user_code},#{user_name} ,#{cp_count}
	)
	</insert>
	<insert id="insertBossDamage" parameterType="model.Boss_count">
	insert into boss_count values(
		#{user_code} ,#{round},#{named},#{damage},#{next_time},#{attack_date}
	)
	</insert>
	
	<select id="selectUserList" resultType="model.User_table">
	select * from user_table
	</select>
	<select id="selectUser" parameterType="model.User_table" resultType="model.User_table">
	select * from user_table where user_code=#{user_code}
	</select>
	<select id="selectBossCount" parameterType="model.Condition" resultType="model.Boss_count">
	select * from boss_count where user_code=#{user_code} 
	and to_date(attack_date,'YYYY-MM-DD HH24:MI:SS') 
	between to_date(#{startDate},'YYYY-MM-DD HH24:MI:SS') and to_date(#{endDate},'YYYY-MM-DD HH24:MI:SS')
	order by to_date(attack_date,'YYYY-MM-DD HH24:MI:SS') asc
	</select>
	
	<update id="updateCount" parameterType="String">
	update user_table set cp_count=cp_count-1 where user_code=#{user}
	</update>
	<update id="resetCp">
	update user_table set cp_count=3
	</update>
	<delete id="resetUser">
	delete from user_table
	</delete>
	<delete id="resetDamage" parameterType="model.Condition">
	delete from boss_count where
	user_code=#{user_code} 
	and to_date(attack_date,'YYYY-MM-DD HH24:MI:SS') 
	between to_date(#{startDate},'YYYY-MM-DD HH24:MI:SS') and to_date(#{endDate},'YYYY-MM-DD HH24:MI:SS')
	</delete>
	<delete id="deleteUser" parameterType="String">
	delete from user_table where user_name=#{user_name}
	</delete>
	
</mapper>